#!/bin/bash

# This file is called run-run-in-signaling-namespace as it follows the
# convention to add a 'run' in front of the script name used by the other
# scripts caliing to craft-daemon.

if [[ $EUID -ne 0 ]]
then
  # Runs run-in-signaling-namespace with any given parameters using the craft
  # daemon. The variables are limited in the RunInSignalingNamespace class.
  command="/usr/share/clearwater/craft/env/bin/run_action RunInSignalingNamespace"
else
  # This has been called with sudo, therefore it does not need to be run
  # through the craft infrastructure and can be followed by any variables.
  command="/usr/share/clearwater/bin/run-in-signaling-namespace"
fi

$command "$@"
